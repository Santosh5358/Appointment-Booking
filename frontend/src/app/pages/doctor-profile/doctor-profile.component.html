<div class="container py-5">
  <h2 class="text-center text-primary fw-bold mb-5">
    Our Medical Specialists
  </h2>

  <div class="row g-4">
    <div
      class="col-12 col-sm-6 col-md-4 col-lg-3"
      *ngFor="let doctor of doctorProfile2"
    >
      <div class="card h-100 border-0 shadow-sm rounded-4">

        <img
          [src]="doctor.profileImage || 'assets/doc-removebg-preview.png'"
          class="card-img-top"
          style="height: 220px; object-fit: cover;"
        />

        <div class="card-body text-center d-flex flex-column">
          <h6 class="fw-semibold text-primary mb-1">
            {{ doctor.title }} {{ doctor.name }}
          </h6>

          <p class="text-muted small mb-1">
            {{ doctor.specializations?.join(', ') }}
          </p>

          <p class="text-muted small mb-3">
            {{ doctor.experience }}+ years experience
          </p>

          <button
            class="btn btn-outline-primary btn-sm mt-auto w-100"
            (click)="changeDoctor(doctor)"
          >
            View Profile
          </button>
        </div>

      </div>
    </div>
  </div>

  <div class="text-center py-5" *ngIf="loading">
    <div class="spinner-border text-primary"></div>
  </div>
</div>


<div class="doctor-profile py-3 py-md-5">
  <div class="container" *ngIf="doctorProfile">

    <!-- PROFILE HEADER -->
    <div class="bg-light rounded-3 p-3 p-md-5 mb-4 mb-md-5">
      <div class="row align-items-center text-center text-md-start">

        <!-- IMAGE -->
        <div class="col-12 col-md-4 mb-4 mb-md-0">
          <img
            [src]="doctorProfile.profileImage || 'assets/doc-removebg-preview.png'"
            alt="Doctor"
            class="img-fluid rounded-circle shadow border border-5 border-primary mx-auto d-block
                  w-75 w-sm-50 w-md-100"
            style="max-width: 260px; aspect-ratio: 1/1; object-fit: cover;">
        </div>

        <!-- DETAILS -->
        <div class="col-12 col-md-8">

          <h2 class="text-primary fw-bold mb-2">
            {{ doctorProfile.title }} {{ doctorProfile.name }}
          </h2>

          <!-- SPECIALIZATIONS -->
          <div class="d-flex flex-wrap justify-content-center justify-content-md-start gap-2 mb-3">
            <span class="badge bg-info"
              *ngFor="let spec of doctorProfile.specializations">
              {{ spec }}
            </span>
          </div>

          <!-- STATS -->
          <div class="row justify-content-center justify-content-md-start mb-3">
            <div class="col-6 col-sm-4 col-md-3 mb-3">
              <div class="bg-white rounded shadow-sm text-center p-3 h-100">
                <h4 class="text-primary mb-0">
                  {{ doctorProfile.experience }}+
                </h4>
                <small class="text-muted">Years Experience</small>
              </div>
            </div>

            <div class="col-6 col-sm-4 col-md-3 mb-3">
              <div class="bg-white rounded shadow-sm text-center p-3 h-100">
                <h4 class="text-primary mb-0">
                  {{ doctorProfile.specializations?.length }}
                </h4>
                <small class="text-muted">Specializations</small>
              </div>
            </div>
          </div>

          <!-- BIO -->
          <p class="text-muted mb-0">
            {{ doctorProfile.bio }}
          </p>

        </div>
      </div>
    </div>

    <!-- CONTACT + HOURS -->
    <div class="row g-4 mb-4 mb-md-5">

      <!-- CONTACT -->
      <div class="col-12 col-md-6">
        <div class="bg-white rounded shadow-sm p-3 p-md-4 h-100">
          <h5 class="text-primary mb-3">
            <i class="bi bi-telephone"></i> Contact Information
          </h5>

          <p class="mb-2">
            <strong>Phone:</strong>
            <a [href]="'tel:' + doctorProfile.phone"
               class="text-decoration-none">
              {{ doctorProfile.phone }}
            </a>
          </p>

          <p class="mb-2">
            <strong>Email:</strong>
            <a [href]="'mailto:' + doctorProfile.email"
               class="text-decoration-none">
              {{ doctorProfile.email }}
            </a>
          </p>

          <p class="mb-3">
            <strong>Address:</strong> {{ doctorProfile.address }}
          </p>

          <a *ngIf="doctorProfile.googleMapLink"
             [href]="doctorProfile.googleMapLink"
             target="_blank"
             class="btn btn-primary btn-sm">
            <i class="bi bi-map"></i> View on Google Maps
          </a>
        </div>
      </div>

      <!-- HOURS -->
      <div class="col-12 col-md-6">
        <div class="bg-white rounded shadow-sm p-3 p-md-4 h-100">
          <h5 class="text-primary mb-3">
            <i class="bi bi-clock"></i> Operating Hours
          </h5>

          <div
            class="d-flex justify-content-between border-bottom py-2"
            *ngFor="let day of ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']">

            <span class="fw-semibold">{{ day }}</span>

            <span class="text-muted"
              *ngIf="operatingHours && operatingHours[day.toLowerCase()]">
              {{ operatingHours[day.toLowerCase()].start }} -
              {{ operatingHours[day.toLowerCase()].end }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- WORK SAMPLES -->
    <div *ngIf="doctorProfile.workSamples?.length" class="mb-4 mb-md-5">
      <h3 class="text-primary mb-4 text-center text-md-start">
        Work Samples & Portfolio
      </h3>

      <div class="row g-4">
        <div class="col-12 col-sm-6 col-md-4"
             *ngFor="let sample of doctorProfile.workSamples">
          <div class="card h-100 shadow-sm">
            <img
              [src]="sample.image || 'assets/placeholder.jpg'"
              class="card-img-top"
              style="height: 220px; object-fit: cover;"
              alt="{{ sample.title }}">

            <div class="card-body">
              <h5 class="card-title">{{ sample.title }}</h5>
              <p class="card-text text-muted">
                {{ sample.description }}
              </p>
              <small class="text-muted">
                <i class="bi bi-calendar"></i>
                {{ sample.date | date:'MMM yyyy' }}
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CONSULTATION FEE -->
    <div *ngIf="doctorProfile.consultationFee"
         class="bg-primary text-white rounded-3 p-4 p-md-5 text-center mb-4 mb-md-5">
      <h4 class="mb-2">Consultation Fee</h4>
      <h2 class="fw-bold">â‚¹{{ doctorProfile.consultationFee }}</h2>
      <p class="mb-3">Per session (60 minutes)</p>

      <button class="btn btn-light btn-lg"
              [routerLink]="['/booking']">
        <i class="bi bi-calendar-check"></i> Book Now
      </button>
    </div>

    <!-- ABOUT -->
    <div class="bg-light rounded-3 p-3 p-md-5">
      <h3 class="text-primary mb-4 text-center text-md-start">
        About the Doctor
      </h3>

      <div class="row g-4">
        <div class="col-12 col-md-6">
          <h5 class="text-primary mb-3">Specializations</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item bg-light"
                *ngFor="let spec of doctorProfile.specializations">
              <i class="bi bi-check-circle text-primary me-2"></i>
              {{ spec }}
            </li>
          </ul>
        </div>

        <div class="col-12 col-md-6">
          <h5 class="text-primary mb-3">Services Offered</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item bg-light">
              <i class="bi bi-house-heart text-primary me-2"></i>
              Home Visit Services
            </li>
            <li class="list-group-item bg-light">
              <i class="bi bi-shield-check text-primary me-2"></i>
              Professional Care
            </li>
            <li class="list-group-item bg-light">
              <i class="bi bi-calendar-check text-primary me-2"></i>
              Flexible Scheduling
            </li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>
